Resources:
  myWebAccessSecurityGroup:
    Type: AWS::EC2::SecurityGroup
    Properties: 
      GroupDescription: "This is a test and challange"
      VpcId: vpc-00d820c251da2d7be
      SecurityGroupEgress: 
      - IpProtocol: -1
        FromPort: -1
        ToPort: -1
        CidrIp: "0.0.0.0/0"
      SecurityGroupIngress:
      - IpProtocol: tcp
        ToPort: 80
        FromPort: 80
        CidrIp: "0.0.0.0/0"
  myWebServerInstance:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t3.micro
      ImageId: ami-0c2ab3b8efb09f272
      UserData:
       Fn::Base64: !Sub |
         #!/bin/bash
         sudo yum update -y
         sudo yum install -y httpd
         sudo systemctl start httpd
         sudo systemctl enable httpd
      NetworkInterfaces:
      - SubnetId: subnet-08703a5ed710e0eb6
        AssociatePublicIpAddress: true
        GroupSet: 
            - Ref: "myWebAccessSecurityGroup"
        DeviceIndex: "0"

  